[![Build Status](https://app.travis-ci.com/raika-jagdish/spring-cloud-contract-example.svg?token=qtWz8dy87HcbefDfvkWn&branch=master)](https://app.travis-ci.com/raika-jagdish/spring-cloud-contract-example)

# README: How to Execute the Program

This README provides instructions to set up and execute the Spring Cloud Contract-based microservices: `Create-Employee-Application` and `Get-Employee-Application`. It also explains how to test the contract between the producer and consumer.

---

## Prerequisites

Before running the program, ensure the following prerequisites are met:

1. **Java Development Kit (JDK)**: Install JDK 17 or higher.
2. **Maven**: Install Maven for building the project.
3. **Spring Boot**: Ensure the Spring Boot framework is set up.
4. **Git**: Clone the source code from the GitHub repository.
5. **Internet Connection**: Required for downloading dependencies and stubs.

---

## Steps to Execute the Program

### 1. Clone the Repository
Clone the source code from the GitHub repository:
```bash
git clone <repository-url>
```

---

### 2. Build the Provider (Get-Employee-Application)
Navigate to the `Get-Employee-Application` directory and build the project:
```bash
cd Get-Employee-Application
mvn clean install
```

This will:
- Generate test classes and stubs based on the contract.
- Package the stubs into a JAR file with the classifier `stubs`.

---

### 3. Build the Consumer (Create-Employee-Application)
Navigate to the `Create-Employee-Application` directory and build the project:
```bash
cd ../Create-Employee-Application
mvn clean install
```

This will:
- Download the stubs from the provider (Get-Employee-Application).
- Run the consumer-side tests using the stubs.

---

### 4. Run the Provider (Get-Employee-Application)
Start the provider microservice:
```bash
cd ../Get-Employee-Application
mvn spring-boot:run
```

The provider will expose an API to check if an employee profile exists based on the identification number.

---

### 5. Run the Consumer (Create-Employee-Application)
Start the consumer microservice:
```bash
cd ../Create-Employee-Application
mvn spring-boot:run
```

The consumer will call the provider's API to check if an employee profile exists before creating a new profile.

---

### 6. Test the Contract
To test the contract between the provider and consumer, run the consumer-side tests:
```bash
mvn test
```

This will:
- Use the stubs generated by the provider to mock the provider's behavior.
- Validate the contract scenarios defined in the `Get-Employee-Application`.

---

### 7. Verify the Endpoints
Use tools like Postman or Curl to verify the endpoints exposed by the microservices.

#### Example: Check if an employee exists (Provider)
```bash
curl -X GET http://localhost:8080/employee-management/employee/1234567890
```

#### Example: Create a new employee (Consumer)
```bash
curl -X POST http://localhost:8180/employee-management/employee \
-H "Content-Type: application/json" \
-d '{"firstName":"John","lastName":"Doe","identityCardNo":"0123456789"}'
```

---

## Troubleshooting

### Common Issues
1. **Provider not starting**: Ensure the `Get-Employee-Application` builds successfully and no port conflicts exist.
2. **Consumer tests failing**: Verify that the stubs are correctly downloaded and the contract matches the provider's implementation.
3. **Contract broken**: If the provider changes its API without updating the contract, the tests will fail. Update the contract and regenerate stubs.

---

## Notes
- The stubs are generated during the provider's build process and packaged into a JAR file.
- The consumer-side tests use the stubs to mock the provider's behavior.
- Any changes to the provider's API must be reflected in the contract to avoid breaking the tests.

---

Enjoy testing your microservices with Spring Cloud Contract! ðŸ˜Š

For more details, visit [Consumer-Driven Contract Testing With Spring Cloud Contract](https://dzone.com/articles/consumer-driven-contract-testing-with-spring-cloud-contract)
